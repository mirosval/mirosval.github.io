<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Mirosval</title>

    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">

    <link href='//fonts.googleapis.com/css?family=Open+Sans:300,700&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    
    <link rel="alternate" type="application/rss+xml" title="Mirosval" href="http://mirosval.github.io/feed.xml">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        
        <a href="/" class="profile-picture-link">
          <img src="/images/cuba.jpg" alt="Profile Picture Mirosval" class="profile-picture">
        </a>

        <p></p>
        <h1>Mirosval</h1>

        <p class="view">
          <a href="https://github.com/mirosval">My GitHub</a>
          <a href="https://twitter.com/mirosva1">My Twitter</a>
        </p>

        <div class="categories">
          <h3>Categories</h3>
          <ul class="categories">
            
              <li>
                <a href="/categories/english">
                  English (13)
                </a>
              </li>
            
              <li>
                <a href="/categories/master-thesis">
                  Master thesis (5)
                </a>
              </li>
            
              <li>
                <a href="/categories/other">
                  Other (5)
                </a>
              </li>
            
              <li>
                <a href="/categories/python">
                  Python (4)
                </a>
              </li>
            
              <li>
                <a href="/categories/slovak">
                  Slovak (3)
                </a>
              </li>
            
              <li>
                <a href="/categories/lamp">
                  Lamp (4)
                </a>
              </li>
            
          </ul>
        </div>

        <div class="tags">
          <h3>Tags</h3>
          <ul class="tags">
            
              <li style="font-size: 1160/11%">
                <a href="/tags/master-thesis">
                  Master thesis (5)
                </a>
              </li>
            
              <li style="font-size: 1160/11%">
                <a href="/tags/opencv">
                  Opencv (5)
                </a>
              </li>
            
              <li style="font-size: 1560/11%">
                <a href="/tags/python">
                  Python (9)
                </a>
              </li>
            
              <li style="font-size: 760/11%">
                <a href="/tags/pupil">
                  Pupil (1)
                </a>
              </li>
            
              <li style="font-size: 860/11%">
                <a href="/tags/iris">
                  Iris (2)
                </a>
              </li>
            
              <li style="font-size: 760/11%">
                <a href="/tags/safari-extension">
                  Safari extension (1)
                </a>
              </li>
            
              <li style="font-size: 860/11%">
                <a href="/tags/performance">
                  Performance (2)
                </a>
              </li>
            
              <li style="font-size: 1060/11%">
                <a href="/tags/hardware">
                  Hardware (4)
                </a>
              </li>
            
              <li style="font-size: 960/11%">
                <a href="/tags/arduino">
                  Arduino (3)
                </a>
              </li>
            
              <li style="font-size: 760/11%">
                <a href="/tags/ios">
                  Ios (1)
                </a>
              </li>
            
              <li style="font-size: 760/11%">
                <a href="/tags/ble">
                  Ble (1)
                </a>
              </li>
            
          </ul>
        </div>
      </header>

    <section class="content">
        <h2>Lamp Project&#58; Printed Circuit Boards</h2>
        <span class="published">Published 19 March 2015</span>
        <p>The journey of the PCB from start to finish. Designed using Eagle CAD, printed at OSH Park, delivered, assembled to build the final lamp.</p>

<hr />

<p><a href="/lamp/english/2015/01/18/lamp-project.html">Project Overview</a>
<a href="/lamp/english/2015/03/07/lamp-project-2.html">Hardware</a>
<a href="/lamp/english/2015/03/12/lamp-project-3.html">Arduino Software</a>
<a href="/lamp/english/2015/03/19/lamp-project-4.html">Printed Circuit Boards</a></p>

<h2 id="design-tool">Design Tool</h2>

<p>I haven’t really searched all that far to discover <a href="http://www.cadsoftusa.com/">Eagle CAD</a>, it seems to be probably the most widely used software for PCB design. I have watched two tutorial videos on YouTube by Jeremy Blum, <a href="https://www.youtube.com/watch?v=1AXwjZoyNno">Schematic Design</a> and <a href="https://www.youtube.com/watch?v=CCTs0mNXY24">Printed Circuit Board Layout</a>. That gave me a pretty good idea about how to use the software. I won’t pretend there weren’t any issues, but all were successfully resolved with a search on StackOverflow. Overall I think it is a very good tool. I’ve never used it before but I have been able to do all I wanted from it in maybe an hour.</p>

<h2 id="schematic-design">Schematic Design</h2>

<p>I started out with a schematic design. I already had a working prototype of the lamp, so it wasn’t so hard to use that to start things off. Overall the schematic is divided into three sub-circuits from the left:</p>

<ul>
  <li>Power, voltage dropdown for the RFduino</li>
  <li>The RFduino</li>
  <li>Darlington Array to increase the voltage back</li>
</ul>

<p><img src="/images/lamp-hw/schematic.png" alt="Board Schematic" /></p>

<p>The most problematic part of the voltage regulator was to actually obtain the part I chose: <a href="http://www.ti.com/product/lp2950-33">LP2950-33</a>. Ideally you would choose a LP2950-30 here, as RFduino’s reference voltage is 3.0V, but it is rated to up to 3.6V, so 3.3V is fine. I have, by accident supplied it with more than that (think ~5V) and it has surprisingly survived.</p>

<p>I have used two 10μF capacitors, one at input and one at output to further stabilize the voltage. </p>

<p>The RFduino is pretty self-explanatory, I have hooked the VCC and GND pins and I’ve connected the GPIO pins 2, 3 and 4 to the input of the darlington array.</p>

<p><img src="/images/lamp-hw/darlington.png" alt="Darlington Array" class="pull-right third" /></p>

<p>The last part was the <a href="https://www.sparkfun.com/datasheets/IC/ULN2003A.pdf">Darlington Array</a>. If you take a look at the schematic below, you’ll see how it’s wired inside. The LED strip has one positive wire and then three ground wires, each for one of the RGB colors. The positive end is connected directly to VCC, 1B-3B are connected to the output of the RFduino, 1C-3C are connected to the LED strip and the ground (not shown in the little schematic) is connected to the circuit ground.</p>

<p>One of the biggest issues I had was to find the parts, Eagle has a large database of components, but still, things like RFduino are not there. Also I needed to make sure I can eventually buy the things somewhere.</p>

<h2 id="board-design">Board Design</h2>

<p>After finishing the schematic, I proceeded with the board design. First I have tried to automatically layout the components, but Eagle has made a complete mess of things, so in the end I had to lay out everyting myself anyway. The process can get a bit awkward with the bends of the wires, but if it does, you can just delete the wire and do it again. You can set the widths of the wires, so I’ve chosen slightly thicker wires for the 12V lines and slightly thinner for the rest. I’ve also managed to keep all the connections to the one side of the board, which just makes it look better in my opinion.</p>

<p><img src="/images/lamp-hw/board.png" alt="Board Design" /></p>

<h2 id="manufacturing">Manufacturing</h2>

<p>Somewhere on the internet I have found <a href="https://oshpark.com/">OSH Park</a> a company from USA that will make PCBs from Eagle CAD files for $5 per square inch (imperial, really??) and ship it anywhere in the world for free. My board cost me under $20, I have ordered it on Feb 26, it got shipped on Mar 6 and arrived in Prague on Mar 18. This manufacturing delay makes mistakes super expensive, but luckily the board works as designed.</p>

<h2 id="assembly">Assembly</h2>

<p>I have assembled the components onto the board today, it took me about an hour and was a really pleasant experience. And the fact that it has worked on the first try was really satisfying. Here have a look at the finished product.</p>

<p><img src="/images/lamp-hw/board-finished.jpg" alt="Board Finished" />
<img src="/images/lamp-hw/finished.jpg" alt="Finished Lamp" /></p>

<h2 id="final-notes">Final Notes</h2>

<p>OSH Park has good <a href="https://oshpark.com/guidelines">guidelines</a> to follow (they also have a file that you can import to Eagle that will check your design). I suggest reading those before submitting anything.</p>

<p>The boards that have arrived look stunning, but there are a couple of things I noticed that could be improved:</p>

<ul>
  <li>Some joints don’t have the small metal area surrounding the hole, which makes them slightly more difficult to solder (see the holes for RFduino and the voltage regulator)</li>
  <li>The other joints have the metal area around holes on both sides of the board, even though only one side has wires</li>
  <li>The boards had some rough edges around the places where they were broken apart from the panel that had to be sanded, but this is just a minor issue</li>
</ul>

<p>Most of these are my fault, I will try to fix them next time I have boards printed.</p>

<p><img src="/images/lamp-hw/board-defects.jpg" alt="Board Defects" class="pull-left h45" />
<img src="/images/lamp-hw/soldering-regulator.jpg" alt="Board Design" class="pull-right h45" /></p>


        
            
        
        <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'mirosval'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

    </section>
      <footer>
        
      </footer>
    </div>
    <script src="/javascripts/scale.fix.js"></script>
    <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
  try {
    var pageTracker = _gat._getTracker("UA-44114682-1");
  pageTracker._trackPageview();
  } catch(err) {}
</script>

    <div class="clear"></div>
  </body>
</html>

