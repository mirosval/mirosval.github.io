<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Mirosval</title>
        <description>Personal blog about programming and stuff</description>      
        <link></link>
        <atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
        
            <item>
                <title>Better IDEA Keymap</title>
                <description>&lt;p&gt;Completely overhauled keyboard shortcuts for Intellij IDEA on macOS.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;boring-ramblings-skip&quot;&gt;Boring ramblings (skip)&lt;/h2&gt;

&lt;p&gt;First of all I really want to shout out to Intellij for building such awesome tools.
I used Eclipse, Netbeans, Visual Studio but they all suck tremendously. OK, Eclipse
and Netbeans are OSS, so you can live with that. But VS? Its almost cruel how shitty
it is. It is so shitty that Intellij made a plugin to fix it. With the plugin its good.
But costs &amp;gt; $1000 for professional use. Its shameful, really.&lt;/p&gt;

&lt;p&gt;IDEA is fantastic, it starts quickly, doesn’t freeze up, offers all these advanced
features, code completions, rewrites and so on. I really recommend it to everyone.&lt;/p&gt;

&lt;p&gt;And it has a community version which is free and paid version is well worth its money.
I pay monthly subscription for my PyCharm.&lt;/p&gt;

&lt;p&gt;So why would I ramble about it in the first place? IDEA has not one but 3 shortcut sets:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Mac OS X 10.5+ (⌃R for Run) - Not very macOS-like&lt;/li&gt;
  &lt;li&gt;Mac OS X (F10 for Run) - WTF?&lt;/li&gt;
  &lt;li&gt;Eclipse (Mac OS X) (⌘⇧F11 for Run) - ?????&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These are just some examples, but generally the keymaps are this stupid overall.
I genuinely wonder who came up with these. F keys on macOS have been traditionally
used for media keys, screen dimming and such. I do not want to use Fn modifier for
that, and I sure as hell will not type Fn⌘⇧F11 just to Run my code, which is probably
the most common action I need a shortcut for. Stupid.&lt;/p&gt;

&lt;h2 id=&quot;guiding-principles&quot;&gt;Guiding Principles&lt;/h2&gt;

&lt;p&gt;I wanted my shortcuts to be as usable as possible, so I tried to keep to these rules:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;One handed shortcuts for the most common actions&lt;/li&gt;
  &lt;li&gt;Two handed only if it is inevitable&lt;/li&gt;
  &lt;li&gt;Ideally Left hand, since most people will use the mouse with the right&lt;/li&gt;
  &lt;li&gt;Do not interfere with existing macOS shortcuts&lt;/li&gt;
  &lt;li&gt;Try to use popular shortcuts from other editors (Atom, Sublime)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;disclaimers-and-limitations&quot;&gt;Disclaimers and limitations&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;I mainly work with Scala and Python, so the shortcuts are optimized for IDEA
and PyCharm, but I’m sure they can be used in other Intellij products.&lt;/li&gt;
  &lt;li&gt;The multiple selection shortcut could annoy some people, because ⌘Click is
mapped to documentation or something like that by default&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;show-me-the-shortcuts&quot;&gt;Show me the shortcuts!&lt;/h2&gt;

&lt;p&gt;Multiple cursors:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;⌘Click to place an additional cursor&lt;/li&gt;
  &lt;li&gt;⌘D to select the next occurrence of a selected word (same as in Atom/Sublime Text)&lt;/li&gt;
  &lt;li&gt;Esc to cancel selection&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Running tests:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Assuming you are using a testing framework like ScalaTest&lt;/li&gt;
  &lt;li&gt;Place cursor into the body of the test function/method/describe/it block&lt;/li&gt;
  &lt;li&gt;If this is the first time you’re running this test (or if you have run a different test previously) start with:
    &lt;ul&gt;
      &lt;li&gt;⌘⇧R to run the test&lt;/li&gt;
      &lt;li&gt;⌘⇧T to run the test with debugger&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;If this is already the second time you’re running this same test/suite:
    &lt;ul&gt;
      &lt;li&gt;⌘R to run the test&lt;/li&gt;
      &lt;li&gt;⌘T to run the test with debugger&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;⌘E while stopped in the debugger&lt;/li&gt;
  &lt;li&gt;⌘. to stop run/test/other running process&lt;/li&gt;
  &lt;li&gt;⌘[ to Step Over in the Debugger&lt;/li&gt;
  &lt;li&gt;⌘] to Step Into in the Debugger&lt;/li&gt;
  &lt;li&gt;⌘\ to Step Out in the Debugger&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Navigation Around IDE:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;⌘P Search Symbols&lt;/li&gt;
  &lt;li&gt;⌘⇧P Search Classes&lt;/li&gt;
  &lt;li&gt;⌘B Jump to definition&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Navigation In the Editor:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;⌥→ and ⌥← To move one word at a time&lt;/li&gt;
  &lt;li&gt;⌥⌃→ and ⌥⌃← To move one word at a time, respecting CamelHumps&lt;/li&gt;
  &lt;li&gt;⌥⇧→ and ⌥⇧← To select one word at a time&lt;/li&gt;
  &lt;li&gt;⌥⇧⌃→ and ⌥⇧⌃← To select one word at a time, respecting CamelHumps&lt;/li&gt;
  &lt;li&gt;⌥⌫ Delete Line&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Other shortcuts:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;⌘5 to Make/Build project, this is useful if you need to see if your project compiles&lt;/li&gt;
  &lt;li&gt;⇧⇧ Search Everything&lt;/li&gt;
  &lt;li&gt;⌘⇧A Search in actions&lt;/li&gt;
  &lt;li&gt;⌘, Preferences&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;download&quot;&gt;Download&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/files/2016-07-30/settings.jar&quot;&gt;My Entire IDEA Settings JAR&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/files/2016-07-30/keymaps-only.jar&quot;&gt;Keymaps Only JAR&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;share&quot;&gt;Share&lt;/h2&gt;

&lt;p&gt;Please take these shortcuts, use them, improve on them, share the changes. Maybe
we can convince Intellij to adopt them for the next IDEA Release.&lt;/p&gt;

</description>
                <pubDate>Sat, 30 Jul 2016 00:00:00 +0200</pubDate>
                <link>/lamp/english/2016/07/30/idea-settings.html</link>
                <guid isPermaLink="true">/lamp/english/2016/07/30/idea-settings.html</guid>
            </item>
        
            <item>
                <title>Lamp Project&amp;#58; Assembly Timelapse</title>
                <description>&lt;p&gt;I have recorded a couple of timelapse videos during project assembly, including sanding the PCB, inserting components and soldering them. I trust some of you might find it interesting, it’s about one minute long.&lt;/p&gt;

&lt;hr /&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/01/18/lamp-project.html&quot;&gt;Project Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/07/lamp-project-2.html&quot;&gt;Hardware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/12/lamp-project-3.html&quot;&gt;Arduino Software&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/19/lamp-project-4.html&quot;&gt;Printed Circuit Boards&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/04/01/lamp-project-5.html&quot;&gt;Assembly Timelapse&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/nxq5sJD4_Y8&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
</description>
                <pubDate>Wed, 01 Apr 2015 00:00:00 +0200</pubDate>
                <link>/lamp/english/2015/04/01/lamp-project-5.html</link>
                <guid isPermaLink="true">/lamp/english/2015/04/01/lamp-project-5.html</guid>
            </item>
        
            <item>
                <title>Lamp Project&amp;#58; Printed Circuit Boards</title>
                <description>&lt;p&gt;The journey of the PCB from start to finish. Designed using Eagle CAD, printed at OSH Park, delivered, assembled to build the final lamp.&lt;/p&gt;

&lt;hr /&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/01/18/lamp-project.html&quot;&gt;Project Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/07/lamp-project-2.html&quot;&gt;Hardware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/12/lamp-project-3.html&quot;&gt;Arduino Software&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/19/lamp-project-4.html&quot;&gt;Printed Circuit Boards&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/04/01/lamp-project-5.html&quot;&gt;Assembly Timelapse&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;##Design Tool&lt;/p&gt;

&lt;p&gt;I haven’t really searched all that far to discover &lt;a href=&quot;http://www.cadsoftusa.com/&quot;&gt;Eagle CAD&lt;/a&gt;, it seems to be probably the most widely used software for PCB design. I have watched two tutorial videos on YouTube by Jeremy Blum, &lt;a href=&quot;https://www.youtube.com/watch?v=1AXwjZoyNno&quot;&gt;Schematic Design&lt;/a&gt; and &lt;a href=&quot;https://www.youtube.com/watch?v=CCTs0mNXY24&quot;&gt;Printed Circuit Board Layout&lt;/a&gt;. That gave me a pretty good idea about how to use the software. I won’t pretend there weren’t any issues, but all were successfully resolved with a search on StackOverflow. Overall I think it is a very good tool. I’ve never used it before but I have been able to do all I wanted from it in maybe an hour.&lt;/p&gt;

&lt;p&gt;##Schematic Design&lt;/p&gt;

&lt;p&gt;I started out with a schematic design. I already had a working prototype of the lamp, so it wasn’t so hard to use that to start things off. Overall the schematic is divided into three sub-circuits from the left:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Power, voltage dropdown for the RFduino&lt;/li&gt;
  &lt;li&gt;The RFduino&lt;/li&gt;
  &lt;li&gt;Darlington Array to increase the voltage back&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/schematic.png&quot; alt=&quot;Board Schematic&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The most problematic part of the voltage regulator was to actually obtain the part I chose: &lt;a href=&quot;http://www.ti.com/product/lp2950-33&quot;&gt;LP2950-33&lt;/a&gt;. Ideally you would choose a LP2950-30 here, as RFduino’s reference voltage is 3.0V, but it is rated to up to 3.6V, so 3.3V is fine. I have, by accident supplied it with more than that (think ~5V) and it has surprisingly survived.&lt;/p&gt;

&lt;p&gt;I have used two 10μF capacitors, one at input and one at output to further stabilize the voltage.&lt;/p&gt;

&lt;p&gt;The RFduino is pretty self-explanatory, I have hooked the VCC and GND pins and I’ve connected the GPIO pins 2, 3 and 4 to the input of the darlington array.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/darlington.png&quot; alt=&quot;Darlington Array&quot; class=&quot;pull-right third&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The last part was the &lt;a href=&quot;https://www.sparkfun.com/datasheets/IC/ULN2003A.pdf&quot;&gt;Darlington Array&lt;/a&gt;. If you take a look at the schematic below, you’ll see how it’s wired inside. The LED strip has one positive wire and then three ground wires, each for one of the RGB colors. The positive end is connected directly to VCC, 1B-3B are connected to the output of the RFduino, 1C-3C are connected to the LED strip and the ground (not shown in the little schematic) is connected to the circuit ground.&lt;/p&gt;

&lt;p&gt;One of the biggest issues I had was to find the parts, Eagle has a large database of components, but still, things like RFduino are not there. Also I needed to make sure I can eventually buy the things somewhere.&lt;/p&gt;

&lt;p&gt;##Board Design&lt;/p&gt;

&lt;p&gt;After finishing the schematic, I proceeded with the board design. First I have tried to automatically layout the components, but Eagle has made a complete mess of things, so in the end I had to lay out everyting myself anyway. The process can get a bit awkward with the bends of the wires, but if it does, you can just delete the wire and do it again. You can set the widths of the wires, so I’ve chosen slightly thicker wires for the 12V lines and slightly thinner for the rest. I’ve also managed to keep all the connections to the one side of the board, which just makes it look better in my opinion.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/board.png&quot; alt=&quot;Board Design&quot; /&gt;&lt;/p&gt;

&lt;p&gt;##Manufacturing&lt;/p&gt;

&lt;p&gt;Somewhere on the internet I have found &lt;a href=&quot;https://oshpark.com/&quot;&gt;OSH Park&lt;/a&gt; a company from USA that will make PCBs from Eagle CAD files: 3 copies of the board for $5 per square inch (imperial, really??) and ship it anywhere in the world for free. My board cost me under $20, I have ordered it on Feb 26, it got shipped on Mar 6 and arrived in Prague on Mar 18. This manufacturing delay makes mistakes super expensive, but luckily the board works as designed.&lt;/p&gt;

&lt;p&gt;##Assembly&lt;/p&gt;

&lt;p&gt;I have assembled the components onto the board today, it took me about an hour and was a really pleasant experience. And the fact that it has worked on the first try was really satisfying. Here have a look at the finished product.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/board-finished.jpg&quot; alt=&quot;Board Finished&quot; /&gt;
&lt;img src=&quot;/images/lamp-hw/finished.jpg&quot; alt=&quot;Finished Lamp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;##Final Notes&lt;/p&gt;

&lt;p&gt;OSH Park has good &lt;a href=&quot;https://oshpark.com/guidelines&quot;&gt;guidelines&lt;/a&gt; to follow (they also have a file that you can import to Eagle that will check your design). I suggest reading those before submitting anything.&lt;/p&gt;

&lt;p&gt;The boards that have arrived look stunning, but there are a couple of things I noticed that could be improved:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Some joints don’t have the small metal area surrounding the hole, which makes them slightly more difficult to solder (see the holes for RFduino and the voltage regulator)&lt;/li&gt;
  &lt;li&gt;The other joints have the metal area around holes on both sides of the board, even though only one side has wires&lt;/li&gt;
  &lt;li&gt;The boards had some rough edges around the places where they were broken apart from the panel that had to be sanded, but this is just a minor issue&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Most of these are my fault, I will try to fix them next time I have boards printed.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/board-defects.jpg&quot; alt=&quot;Board Defects&quot; class=&quot;pull-left h45&quot; /&gt;
&lt;img src=&quot;/images/lamp-hw/soldering-regulator.jpg&quot; alt=&quot;Board Design&quot; class=&quot;pull-right h45&quot; /&gt;&lt;/p&gt;

</description>
                <pubDate>Thu, 19 Mar 2015 00:00:00 +0100</pubDate>
                <link>/lamp/english/2015/03/19/lamp-project-4.html</link>
                <guid isPermaLink="true">/lamp/english/2015/03/19/lamp-project-4.html</guid>
            </item>
        
            <item>
                <title>Lamp Project&amp;#58; Arduino Software</title>
                <description>&lt;p&gt;Bluetooth 4 Low Energy protocol implementation on the Lamp&lt;/p&gt;

&lt;hr /&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/01/18/lamp-project.html&quot;&gt;Project Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/07/lamp-project-2.html&quot;&gt;Hardware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/12/lamp-project-3.html&quot;&gt;Arduino Software&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/19/lamp-project-4.html&quot;&gt;Printed Circuit Boards&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/04/01/lamp-project-5.html&quot;&gt;Assembly Timelapse&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Below you can find the whole source code for the Arduino sketch uploaded to RFduino. It’s pretty simple for now, it contains mappings to the pins that output &lt;a href=&quot;http://en.wikipedia.org/wiki/Pulse-width_modulation&quot;&gt;PWM&lt;/a&gt; for the LEDs. It also contains definitions of 2 modes that are supported: &lt;em&gt;MODE_RESET&lt;/em&gt; and &lt;em&gt;MODE_HOLD&lt;/em&gt;. The reset mode will turn of the light on disconnect, while the hold mode will keep the color even if the remote disconnects. It can then be changed if someone send it a new color.&lt;/p&gt;

&lt;p&gt;The most interesting I guess is the onReceive function that is called by the RFduino stack when it has received new data. It receives a pointer to the data array and its length. This also defines the lamp protocol, so the data format is as follows:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;One data packet is 4 bytes long&lt;/li&gt;
  &lt;li&gt;Position 0 is the mode, currently only values 0 and 1 are supported, 0 will reset color after the client disconnects, 1 will keep the color until changed&lt;/li&gt;
  &lt;li&gt;Position 1-3 are RGB values to be written to the output&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The mode is finally resolved in the RFduinoBLE_onDisconnect function.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;RFduinoBLE.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Lamp Modes
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MODE_RESET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MODE_HOLD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// pin 3 on the RGB shield is the red led
// (can be turned on/off from the iPhone app)
&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;led_r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;led_g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;led_b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// led turned on/off from the iPhone app
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;pinMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OUTPUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pinMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OUTPUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;pinMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OUTPUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;RFduinoBLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;advertisementData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;mlamp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;c1&quot;&gt;// start the BLE stack
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;RFduinoBLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;begin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RFduinoBLE_onDisconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MODE_HOLD&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Mode was set to MODE_HOLD, so will leave LEDs on&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// MODE_RESET
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;Serial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Mode was set to MODE_RESET, so turning off LEDs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// don't leave the led on if they disconnect
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;analogWrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;analogWrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;analogWrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;RFduinoBLE_onReceive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;len&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  
  &lt;span class=&quot;c1&quot;&gt;// 2nd byte is mode
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  
  &lt;span class=&quot;c1&quot;&gt;// 3rd, 4th, 5th are r,g,b
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  
  &lt;span class=&quot;c1&quot;&gt;// set the color
&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;analogWrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;analogWrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;analogWrite&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;led_b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

</description>
                <pubDate>Thu, 12 Mar 2015 00:00:00 +0100</pubDate>
                <link>/lamp/english/2015/03/12/lamp-project-3.html</link>
                <guid isPermaLink="true">/lamp/english/2015/03/12/lamp-project-3.html</guid>
            </item>
        
            <item>
                <title>Lamp Project&amp;#58; The Hardware Prototype</title>
                <description>&lt;p&gt;The detailed description of the prototype hardware used for the lamp project.&lt;/p&gt;

&lt;hr /&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/01/18/lamp-project.html&quot;&gt;Project Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/07/lamp-project-2.html&quot;&gt;Hardware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/12/lamp-project-3.html&quot;&gt;Arduino Software&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/19/lamp-project-4.html&quot;&gt;Printed Circuit Boards&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/04/01/lamp-project-5.html&quot;&gt;Assembly Timelapse&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I have, obviously, started with an idea. I didn’t like any of the exisiting smart lamp solutions, mostly because they lacked customizability. So my thought process was to start with some minimal requirements. I have come up with the following:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;RGB LED Strip for the actual light&lt;/li&gt;
  &lt;li&gt;Bluetooth for controls&lt;/li&gt;
  &lt;li&gt;Some sort of Arduino to process it all&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/finished-board.jpg&quot; alt=&quot;Finished prototype board&quot; /&gt;&lt;/p&gt;

&lt;p&gt;##Choosing the RGB LED Strip&lt;/p&gt;

&lt;p&gt;There are lots of different options, there are single-color strips, RGB strips or &lt;a href=&quot;http://www.adafruit.com/products/1138&quot;&gt;programmable strips&lt;/a&gt;, where you can change the color of every single LED. I though I would be fine with just controlling the color of the entire strip so I went with something like &lt;a href=&quot;http://www.ebay.com/itm/5M-5050-RGB-SMD-LED-Waterproof-Flexible-Strip-300-LEDs-44-Key-IR-Remote-/180992529478&quot;&gt;this&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I don’t need the stupid IR controller, but I found that sometimes you can get the same thing &lt;em&gt;with&lt;/em&gt; the controller for less than without it. The key characteristics are:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;SMD 5050 - this represents the size of a single LED&lt;/li&gt;
  &lt;li&gt;60 LED/m - I want this to be bright&lt;/li&gt;
  &lt;li&gt;12V DC - operating voltage&lt;/li&gt;
  &lt;li&gt;1A/m - required current per 1 meter of the strip&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These things are really key, because everything else in the system is based on these values. If you change anything, be sure to adjust the rest of the system accordingly.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/detail-led-strip.jpg&quot; alt=&quot;LED Stri Detail&quot; /&gt;&lt;/p&gt;

&lt;p&gt;##Next, Arduino&lt;/p&gt;

&lt;p&gt;I have come across &lt;a href=&quot;http://www.rfduino.com/product/rfd22102-rfduino-dip/index.html&quot;&gt;RFduino&lt;/a&gt;. I have bought some basic kit when they were on Kickstarter, but I have since bought 6 more units. The trouble with this board is a bit in its availability. &lt;a href=&quot;https://www.sparkfun.com/categories/274&quot;&gt;Sparkfun&lt;/a&gt; has it, but in the EU it is much more difficult to get your hands on it. I ended up buying from &lt;a href=&quot;http://cz.mouser.com/new/rfdigital/rf-digital-rfduino/&quot;&gt;Mouser&lt;/a&gt;, but they are primarily a wholesale operation, so it’s expensive to buy small quantities from them.&lt;/p&gt;

&lt;p&gt;Having said that, I’m really happy with RFduino, it is programmable with the Arduino IDE, has nice sample code and iOS libraries, uses Bluetooth 4.0 Low Energy, which is super nice and, most importantly, I have found the connectivity &lt;em&gt;great&lt;/em&gt;, it just always works. It has also survived a couple of blunders on my part, such as connecting it to 5V power instead of the recommended 3.3V.&lt;/p&gt;

&lt;p&gt;##Power supply&lt;/p&gt;

&lt;p&gt;So my calculation went like this: I want a 1m long LED strip controlled by RFduino, that is 12V * 1A = 12W. So I need a 12W power supply. I ended up buying &lt;a href=&quot;http://www.gmelectronic.com/power-ac-adapter-12v-1500ma-connector-2-1mm-mw-p751-193&quot;&gt;this one&lt;/a&gt; because it has enough power, nice connector and is relatively cheap.&lt;/p&gt;

&lt;p&gt;##Connecting it all together&lt;/p&gt;

&lt;p&gt;Now I have a LED strip and a power supply which both operate at 12V, but I have a RFduino which operates at 3.3V. So the problem is twofold:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Convert 12V to 3.3V to power the RFduino&lt;/li&gt;
  &lt;li&gt;Drive the 12V LED with the signal from RFduino&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This in the end translates into 2 subsystems that need to be designed. A power regulator circuit to power RFduino from 12V and an amplifier or a relay that could drive the LEDs.&lt;/p&gt;

&lt;p&gt;###Voltage Regulator for the RFduino 12V to 3V&lt;/p&gt;

&lt;p&gt;This was the hardest part to figure out for me. I didn’t want anything overly complicated and in the end I’ve settled for the &lt;a href=&quot;http://www.ti.com/product/lp2950-33&quot;&gt;LP2950-33&lt;/a&gt; (&lt;a href=&quot;http://www.onsemi.com/pub_link/Collateral/LP2950-D.PDF&quot;&gt;Datasheet&lt;/a&gt;). It looks like a transistor, has 3 legs, one for input, one for output and one for ground. The usual usage example I found involved capacitors between output and ground and optionally between input and ground to further stabilize the voltage. LP2950 comes in different varietes, so I chose the one that had it’s output voltage closest to RFduino’s 3V.&lt;/p&gt;

&lt;p&gt;###Darlington Array to drive the LED Strip&lt;/p&gt;

&lt;p&gt;The last thing to do was to bring the PWM pin output from RFduino into the strip. The way the strip is connected is that there is a +12V cable and three different grounds, one for each of the RGB channels. So basically what the darlington does, is connect each of the RGB channels to the ground such, that the amount of current flowing through them can be controlled by RFduino.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/finished-wiring.jpg&quot; alt=&quot;Finished prototype board - wiring&quot; /&gt;&lt;/p&gt;

&lt;p&gt;##The Prototype&lt;/p&gt;

&lt;p&gt;I have built the prototype using an universal board with headers bought from &lt;a href=&quot;http://www.aliexpress.com/snapshot/6468939297.html?orderId=65605779553704&quot;&gt;Aliexpress&lt;/a&gt; so that I can plug the RFduino in and out as I please. This is what it looks like when I turn it on:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp-hw/finished-on.jpg&quot; alt=&quot;Finished prototype turned on&quot; /&gt;&lt;/p&gt;
</description>
                <pubDate>Sat, 07 Mar 2015 00:00:00 +0100</pubDate>
                <link>/lamp/english/2015/03/07/lamp-project-2.html</link>
                <guid isPermaLink="true">/lamp/english/2015/03/07/lamp-project-2.html</guid>
            </item>
        
            <item>
                <title>Lamp Project</title>
                <description>&lt;p&gt;In this series I will share my experiences with building an Rfduino-based RGB LED lamp from start to finish, including iOS and other apps for remote control.&lt;/p&gt;

&lt;hr /&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/01/18/lamp-project.html&quot;&gt;Project Overview&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/07/lamp-project-2.html&quot;&gt;Hardware&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/12/lamp-project-3.html&quot;&gt;Arduino Software&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/03/19/lamp-project-4.html&quot;&gt;Printed Circuit Boards&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/lamp/english/2015/04/01/lamp-project-5.html&quot;&gt;Assembly Timelapse&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;I’ve had this idea for a project for quite some time now, but now I’ve actually come around to some real progress. The project specificaton is simple: I wanted to build an RGB LED lamp that could be controlled wirelessly. That idea in and of itself is not particularly new or unprecedented, however when I was looking at ready-made solutions online, I couldn’t find anything that would work for me. I really just wanted something that could be programmed or controlled remotely.&lt;/p&gt;

&lt;p&gt;##The Vision&lt;/p&gt;

&lt;p&gt;I really just want a smart lamp, that would be able to do things like change color and intensity of light according to various outside stimuli, such as direct control via a mobile phone, automatic lighting up and dimming according to my sleep cycle, audio input, temperature and so on. I would like to be able to control multiple lamps from one place and optionally have “groups” of lamps that could be controlled separately. I could not find anything that would be both inexpensive and flexible enough for my programming needs (most of these cheap RGB LED strips come with an IR remote control, but that is a joke). I thought I could build something that would work for me from the following components:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;IKEA Lamp&lt;/li&gt;
  &lt;li&gt;Arduino&lt;/li&gt;
  &lt;li&gt;RGB LED Strip&lt;/li&gt;
  &lt;li&gt;Power supply&lt;/li&gt;
  &lt;li&gt;iOS Device&lt;/li&gt;
  &lt;li&gt;Raspberry PI&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;##The current state of things&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/lamp/lamp-1.jpg&quot; alt=&quot;Current state of the RGB LED Lamp&quot; class=&quot;pull-left half&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I’ve built a lamp using an Arduino and a Bluetooth chip that could be controlled by Bluetooth 2.0 back in 2012. This was good, but not good enough. The RGB strip worked well, but Bluetooth connection was unreliable and prone to problems (unable to find the device, unable to connect, etc.)&lt;/p&gt;

&lt;p&gt;In the summer of 2014 I have built another prototype based on the &lt;a href=&quot;http://www.rfduino.com/&quot;&gt;Rfduino&lt;/a&gt;, the new hot platform that includes Arduino and Bluetooth 4.0 (or BLE) in one package. This prototype works flawlessly, the connection is stable and easily established, which is a huge plus.&lt;/p&gt;

&lt;p&gt;I currently have 1 Rfduino-based lamp with a 1m RGB LED strip attached to it. The LED strip I’m currently using is something like &lt;a href=&quot;http://www.amazon.co.uk/Waterproof-300LEDs-Flexible-Lighting-Decoration/dp/B009ZOLW04/ref=sr_1_46?s=lighting&amp;amp;ie=UTF8&amp;amp;qid=1421617842&amp;amp;sr=1-46&amp;amp;keywords=5050+rgb+led+strip&quot;&gt;this&lt;/a&gt;. The key parameters are 12V, ~1A/m, 5050 LEDs 60 pieces per meter. The cool part is that the strip can be cut every 5cm (every 3 LEDs). So I have bought a 5m roll and I’m going to cut it into 5 1m long strips for use in 5 lamps.&lt;/p&gt;

&lt;p&gt;The 1m LED strip I have draws 1.2A at 12V, which means it has a wattage of 14.4W. This determines all of the other components that are needed. For power supply I have used something like &lt;a href=&quot;http://uk.farnell.com/powerpax/sw3526/ac-dc-power-supply-12v-1-25a-euro/dp/1971795&quot;&gt;this&lt;/a&gt;. At 15W it supplies enough power for the LED strip,  Rfduino and the remaining circuitry.&lt;/p&gt;

&lt;p&gt;I have designed a simple protocol that is able to send the RGB color to the lamp and is able to address up to 255 lamps. iOS is limited to 10 simmultaneous BT connections, so 255 is more than could be realistically adressed anyways.&lt;/p&gt;

&lt;p&gt;And lastly I have built an iOS app that is able to set a solid color on a lamp, or alternatively can use the microphone to set the intensity of the light, while the user can pick the hue. I will discuss all these points in depth in future posts.&lt;/p&gt;

&lt;p&gt;##Immediate future of the project&lt;/p&gt;

&lt;p&gt;Currently I have 1 lamp that works with the iOS app. I’ve recently received a shipment of 7 new Rfduinos and I’ve ordered more parts online which should arrive shortly. In the next weeks I’m going to build another prototype and test how the iOS app and the protocol cope with 2 or 3 lamps. I would also like to employ my Raspberry pi in the project, so that it could control the lamps without the need to use an iOS device. This would be perfect for things like morning alarm light, afternoon automatic lights and so on.&lt;/p&gt;

&lt;p&gt;Another little subproject I have researched and would like to do is having PCBs printed. I have started designing the board using &lt;a href=&quot;http://www.cadsoftusa.com/&quot;&gt;Eagle&lt;/a&gt;, but I have to wait until I can finalize the component list. I found an interesting place that could print my PCBs, &lt;a href=&quot;https://oshpark.com/&quot;&gt;OSHPark&lt;/a&gt; and I would like to see how it works.&lt;/p&gt;

&lt;p&gt;##Long term ideas&lt;/p&gt;

&lt;p&gt;There are a couple of things that I can see as a long term / low priority goals for the project:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Have some sort of switch that would disentangle the lamp from the iOS controller&lt;/li&gt;
  &lt;li&gt;Have printed PCBs and a box with everything nicely contained inside&lt;/li&gt;
&lt;/ul&gt;

</description>
                <pubDate>Sun, 18 Jan 2015 00:00:00 +0100</pubDate>
                <link>/lamp/english/2015/01/18/lamp-project.html</link>
                <guid isPermaLink="true">/lamp/english/2015/01/18/lamp-project.html</guid>
            </item>
        
            <item>
                <title>Roulette III</title>
                <description>&lt;p&gt;Pred časom sa mi dostal do ruky link na &lt;a href=&quot;http://braniblog.info/2/?fb_action_ids=10204512621958174&amp;amp;fb_action_types=og.likes&quot;&gt;zaujímavý článok o rulete&lt;/a&gt;, nazvaný “Ako som zarobil peniaze a kúpil si Lexus SC430-2003”. Veľmi som tomu neveril, ale snažím sa mať hlavu otvorenú, tak som si to aspoň prečítal. V tomto poste by som teda chcel zhrnúť svoje postrehy.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Tento článok pozostáva z 3 častí:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-I.html&quot;&gt;Analýza pôvodného článku a metódy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-II.html&quot;&gt;Štatistická simulácia metódy a jej vyhodnotenie&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-III.html&quot;&gt;O čo vlastne ide a závery&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;Ako je teda možné, že tento chlapík zarobil “približne 6 tisíc mesačne”? Vysvetlení je niekoľko:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Kasíno používa iný algoritmus na výpočet náhodných čísel. To je vysoko nepravdepodobné, pretože je to nelegálne. Náhodné čísla by mali byť uniformne rozložené.&lt;/li&gt;
  &lt;li&gt;Pán autor článku (neuviedol meno, tak neviem kto to je) je proste dieťa šťasteny a naozaj tie peniaze vyhral, ale nie preto, že jeho metóda je super, ale jednoducho mal šťastie&lt;/li&gt;
  &lt;li&gt;Pán autor nezarába na hraní v kasíne, ale na tom blogu. Ako? Referrals.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Keď sa na ten blog bližšie pozrieme, vidíme, že je to vlastne len “blog” s &lt;a href=&quot;http://braniblog.info/&quot;&gt;1 stránkou&lt;/a&gt; a doménu &lt;a href=&quot;http://whois.domaintools.com/braniblog.info&quot;&gt;vlastní niekto z Kyjeva&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Všetky linky na stránke vedú na &lt;a href=&quot;http://braniblog.info/2/eu.php&quot;&gt;http://braniblog.info/2/eu.php&lt;/a&gt;, ktorá nás presmeruje cez &lt;a href=&quot;http://site.gotoeucasino.com/index.cgi?aname=mitkobombata1&amp;amp;zone_id=brask2&quot;&gt;http://site.gotoeucasino.com/index.cgi?aname=mitkobombata1&amp;amp;zone_id=brask2&lt;/a&gt; na &lt;a href=&quot;http://slovakian.eucasino.com/&quot;&gt;http://slovakian.eucasino.com/&lt;/a&gt;, zaregistrované na Cypre, len tak mimochodom. Takže, keď sa cez tento link dostanete na kasíno, autor článku dostane nejaké percentá z vášho prvého vkladu, koľko presne to je alebo ako to funguje sa mi nepodarilo vypátrať.&lt;/p&gt;

&lt;p&gt;Ešte pikoška na záver, spravil som si &lt;a href=&quot;https://www.google.com/search?tbs=sbi:AMhZZivtxO7IivBaAiGAKuUK3NmymUxIq7xkPVqT2XM-AWfwAvNBSexSAO6JnaygNiXF6s47HtuX4LKqkC7DZtJGFUtED8WwlHRZ4TrcWU5AaG_1BOdPO9iCgXdhLvXIq-6KPjvMSHMkygzx7o8IfV3oY2W28SVHQm_1OZnsdwDLxDsN388rZpmq8_1Xy6HP0uPbrth_18MKWzD7XZHetHxvD26fUdrMRpKg6Y_1yJCDs5TT9CmByYPHtq_19Wd6zkAEeZiA6O6hKstt7foGhE-U5bpIPimLbYNA8OKUiUb3KDTt0vMIZMXTadEiAq_1hdqTSEfWP-N3iNYmLVwrz1vnJJn-Q1ArsCuWomb9-el0g-fBXr67z6J39h88tk1VZDBdzBgvVjzTiYe-R-HJBJlqrNXRJAJIeCwJDWp3dR3kqHkQG6kXk9Jt0FS0JOXMbyeIVfDu3TXRwQ3u9Hl35c5aa2FP8_1Nsha2fx0FoeAImWc5BKQgg-kDdgHR-Dyy9KLof66kFEJj253kU0Rx308o4F02u2kOEMFCXCx3NVhC0i3Eu7b0tnO0VQl56Kndao1uxQ6WdxliDiS3g9cFeGYcxuMoL1rHFmwdTS9F0GmSfrb6wh4NAUDSOjJuM_1V6VD6CaXKBn34a-BLCJaX3dNoUhAYYcWIr7GH_1lSKrxkUxJvfBJmBkCHyLbJVrMLz0bXMz4OyJjfBmYnlqDN3Fa7Yo2_1Romt81p7CSeR8VDObOVk_17EYsHIvk3mFFRfxgSDuJBFmMGYhrE6fuHPcCsJUDF15g0G3SmRRIIZkN9QS6JtN7NHnosAm_1LHk29ZG6m_1RiPqAhur1ggYq08ELh3Y_1WamMu2F-4emnu2kv1qSPxNvkqhuI28bri4zuF7xQFV2QuDXBUh1l_1KKP4gnf_1eHPyCRaZ1CCt3eBIAjzHRd44rbwJ8StAOwSfWVJ8cZn9Cv5BY2YvM-B0nWX_1h3EoWf0cOruX-ZTN-PnXRE5Dbfv8s88tjauwQNcPVnOwpDal56rdnqS4wkHm52FOrJYCg71pyhxhL_1pK5G2Q_1xmHP14jcqf0sqfHH-M9NPaC-ab1cMKAMVGWeWI5XI3zhWRZtGn1iX354oBmVMd2AKtgR4YrwSe2hVfB3opsut6oOMe5lgmL5HsSdzDp0bHOlKGdkhR-_1caWT3vN05ohcUF5ulolcyIjDJN6jPR-8qgHFMDNYrz2F3Xzz4xBmr8S3caTEik6EJxYysF37CvjLP0QjV3Oy9n6Wz3wfc1opQEXl0xUNwqCoOmADp29YNDGXUl34xIvnFcrn1LmaXH78tGSpFuqm_1k9WEB-4QNgKW1Xr_1rk-El6IN9FH7_1aZO1justpzsk2gf8s8wooFqFSPbbHLNDq0u99e2NEraHVyRv-c3nAcjwnu0L--1J9gIxpkZMHnNMWgCt3Z0q0FToYTQPGZLdSG8V_1Xhu_11GPVKyGd59uOG49f--ix0hWy2U_1NwCd3ITSj0r_19dtcJOaUcNrWKok21YuiS_1Uk_14wpSqxOaaXVS2qe2M_1B7LtSOxK-czdDyI0r-wHcmBMRyLjTPgexxNYg&amp;amp;btnG=Search%20by%20image&quot;&gt;Google Reverse Image Search&lt;/a&gt; na ten obrázok, kde “autor” stojí pri svojom novom aute, pozrite si to sami :)&lt;/p&gt;

&lt;p&gt;Aby som to teda zhrnul. Nemám nič proti kasínam, to je každého osobná vec ako míňa svoje peniaze. Dokonca nemám ani nič proti autorovi tohoto článku, aj keď zneužíva to, že niektorí ľudia sú rozumovo slabší a neuvedomia si, o čo ide. Túto sériu článkov beriem s nadhľadom a ako cvičenie v štatistike a Pythone. Preto ak niekto nájde niekde nejakú chybu alebo nezrovnalosť, dajte mi vedieť.&lt;/p&gt;
</description>
                <pubDate>Thu, 10 Jul 2014 00:00:00 +0200</pubDate>
                <link>/python/other/slovak/2014/07/10/roulette-III.html</link>
                <guid isPermaLink="true">/python/other/slovak/2014/07/10/roulette-III.html</guid>
            </item>
        
            <item>
                <title>Roulette II</title>
                <description>&lt;p&gt;Pred časom sa mi dostal do ruky link na &lt;a href=&quot;http://braniblog.info/2/?fb_action_ids=10204512621958174&amp;amp;fb_action_types=og.likes&quot;&gt;zaujímavý článok o rulete&lt;/a&gt;, nazvaný “Ako som zarobil peniaze a kúpil si Lexus SC430-2003”. Veľmi som tomu neveril, ale snažím sa mať hlavu otvorenú, tak som si to aspoň prečítal. V tomto poste by som teda chcel zhrnúť svoje postrehy.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Tento článok pozostáva z 3 častí:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-I.html&quot;&gt;Analýza pôvodného článku a metódy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-II.html&quot;&gt;Štatistická simulácia metódy a jej vyhodnotenie&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-III.html&quot;&gt;O čo vlastne ide a závery&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;Teraz sa pozrieme na simuláciu tejto metódy. Kompletný zdrojový kód nájdete ako &lt;a href=&quot;http://nbviewer.ipython.org/gist/mirosval/dda218a0ae7cb1ab9449&quot;&gt;IPython Notebook&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Nasledujúca časť je však to podstatné. Implementácia logiky uvedenj metódy.&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-python&quot; data-lang=&quot;python&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;play&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tosses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# account_history podrzi vsetky hodnoty uctu pocas celej hry&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;account_history&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# pociatocna uroven stavky je 1 euro&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# stavkujeme na cervenu alebo na ciernu, zaciname na ciernej&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;betting_on_red&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# vyhrali sme toto kolo?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;won&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
    
    &lt;span class=&quot;c&quot;&gt;# iterujeme cez vsetky nahodne hody&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tosses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;    
        &lt;span class=&quot;c&quot;&gt;# ak prave stavkujeme na cervenu a padla cervena, vyhravame&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;betting_on_red&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;won&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# ak stavkujeme na ciernu a padla cierna, tiez vyhravame&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;betting_on_red&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;won&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# inak sme prehrali&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;won&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
        
        &lt;span class=&quot;c&quot;&gt;# ak sme toto kolo vyhrali&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;won&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# pripiseme si vyhru&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bet&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# zmenime farbu&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;betting_on_red&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;betting_on_red&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# resetujeme stavku na 1 euro&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;# ak sme prehrali&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# odpocitame si prehru&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bet&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;# zvysime stavku na dvojnasobok&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;bet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
        
        &lt;span class=&quot;c&quot;&gt;# zapiseme si vysledok do historie&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;account_history&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;c&quot;&gt;# ak sme klesli s uctom na alebo pod nulu, koncime&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_history&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;# vratime vysledky&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_balance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_history&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Ak z tohoto kódu vynecháme riadky 56 a 57, môžeme dostať nasledujúci graf&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/roulette/crash-arrow.jpg&quot; alt=&quot;Crash&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Tento graf ilustruje prečo je táto metóda problematická. Nestáva sa to vždy, ale občas sa stane, že nasleduje rovnaká farba veľa ťahov po sebe. V závislosti od počiatočného rozpočtu vždy existuje počet opakovaní ktorý je už likvidačný. Na úrovni 200€ je likvidačná 8x rovnaká farba zasebou.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Ťah&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;Stávka&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;Kumulatívna strata&lt;/th&gt;
      &lt;th style=&quot;text-align: right&quot;&gt;Stav účtu&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;199&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;2&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;197&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;193&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;15&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;185&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;16&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;31&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;169&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;32&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;63&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;137&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;64&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;127&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;73&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;128&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;255&lt;/td&gt;
      &lt;td style=&quot;text-align: right&quot;&gt;-55&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Pravdepodobnosť, že sa to stane je (19/37)^8 = 0,004835206373, čiže asi pol percenta. To môže vyzerať ako málo, ale treba si uvedomiť, že každý deň, podľa autora, hráme cca 180 hier!&lt;/p&gt;

&lt;p&gt;Aby sme videli ako sa to prejaví v simulácii, pozrime sa na nasledujúci graf&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/roulette/cumulative.png&quot; alt=&quot;Cumulative&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Tento graf ukazuje ako skončilo 1 000 hier, to sú cca 3 roky, 3 hodiny denne. Zelené krížiky sú hry ktoré skončili v pluse, červené, ktoré skončili v mínuse alebo na nule. Nula v tomto prípade znamená, že sme skončili s 200 eurami a za tie 3 hodiny sme nič nezarobili. Čiže oproti minimálnej mzde ste asi 9 eur v mínuse.&lt;/p&gt;

&lt;p&gt;Ten istý program som pustil aj 10 000 krát, aby som získal presnejšie výsledky. Graf tu neukazujem, lebo je to len chaotickejšia verzia toho, ktorý tu už je. Zaujímavé sú však čísla. Minimálna výhra mi vyšla -455€, maximálna 111€ a pravdepodobnosť, že o všetko prídete cca na úrovni 34%. To znamená, že jedna tretina hier končí prinajlepšom na nule. Ale podstatný detail je, že nevyhráte 180€, ale len okolo 100€. Spolu to teda znamená, že v jednej tretine hier prerobíte 200€ a v dvoch tretinách zarobíte 100€, čo je dokopy cca 0€ keď sa to zráta a podčiarkne. To zhruba sedí s tým čo sa píše na &lt;a href=&quot;http://en.wikipedia.org/wiki/Roulette&quot;&gt;Wikipedii&lt;/a&gt; v kolónke Expected value (on a $1 bet) (French), a síce, že očakávaná vyhra pri opakovanej stávke na jednu farbu je matematicky -$0.027.&lt;/p&gt;

&lt;p&gt;V skratke, vyhráva kasíno. Ako vždy.&lt;/p&gt;

&lt;p&gt;Pokračujte &lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-III.html&quot;&gt;O čo vlastne ide a závery&lt;/a&gt;&lt;/p&gt;
</description>
                <pubDate>Thu, 10 Jul 2014 00:00:00 +0200</pubDate>
                <link>/python/other/slovak/2014/07/10/roulette-II.html</link>
                <guid isPermaLink="true">/python/other/slovak/2014/07/10/roulette-II.html</guid>
            </item>
        
            <item>
                <title>Roulette I</title>
                <description>&lt;p&gt;Pred časom sa mi dostal do ruky link na &lt;a href=&quot;http://braniblog.info/2/?fb_action_ids=10204512621958174&amp;amp;fb_action_types=og.likes&quot;&gt;zaujímavý článok o rulete&lt;/a&gt;, nazvaný “Ako som zarobil peniaze a kúpil si Lexus SC430-2003”. Veľmi som tomu neveril, ale snažím sa mať hlavu otvorenú, tak som si to aspoň prečítal. V tomto poste by som teda chcel zhrnúť svoje postrehy.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Tento článok pozostáva z 3 častí:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-I.html&quot;&gt;Analýza pôvodného článku a metódy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-II.html&quot;&gt;Štatistická simulácia metódy a jej vyhodnotenie&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-III.html&quot;&gt;O čo vlastne ide a závery&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;Na prvý pohľad je to zaujímavý článok od normálneho chlapíka. Ale po prvých pár paragrafoch úvodných kecov sa to rozbieha. Autor (ktorý nikde nie je podpísaný), píše 3 hlavné rozdiely medzi on-line a skutočným kasínom:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Nikto nevidí, čo hráč robí pri počítači. Nie sú tam žiadni manažéri miestností, kamery alebo pozorní krupieri školení na sledovanie hráčskych metód a stratégií. Je tam iba hráč a jeho počítač.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To je síce pravda, že pri online hraní vás nikto fyzicky nevidí, lebo ste doma. Avšak pán autor zabudol, spomenúť, že okrem vás a vášho počítača je tam ešte server, ktorý vlastní kasíno. Tento server vidí vaše karty, ako rýchlo, ako často, a akú sumu staviate, skrátka vidí oveľa viac ako vidí ktokoľvek vo fyzickom kasíne. V klasickom kasíne si nikto nezapisuje vaše všetky stávky.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Nie sú žiadne limity na stávkovanie. V skutočnom kasíne musia hráči uzatvoriť stávky za menej ako 20 sekúnd. Ďalšou výhodou hrania on-line je, že hráči môžu pred uzavretím stávok počkať, takže môžu urobiť ten najlepší možný ťah.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To, či v skutočnom kasíne limity sú alebo nie sú neviem, avšak nerozumiem ako vám pomôže čakať s uzatvorením stávky, keďže ruleta je prakticky hra jedného hráča a stávky ostatných hráčov nič nemenia.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Keď hráte v on-line kasíne, môžete v skutočnosti dávať do stávky veľmi malé sumy, čo je nevyhnutné na to, aby táto metóda efektívne fungovala. V žiadnom skutočnom kasíne by vám to nedovolili.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Znova neviem ako je to v skutočnom kasíne, ale to či táto metóda funguje, si ukážeme za chvíľu.&lt;/p&gt;

&lt;p&gt;Pre lenivších tu opíšem celú tú metódu:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Hlavný princíp tejto metódy je založený na opakovanom stávkovaní malých súm na základe prvej stávky. Používanie takejto schémy je 100 % legálne. Túto techniku som použil pri hraní rulety on-line a už v priebehu 5 mesiacov sa mi podarilo získať dosť peňazí na kúpu vysnívaného auta.&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;Každú novú hru začínam stávkou 1 € na čierne číslo.&lt;/li&gt;
    &lt;li&gt;Ak prehrám (guľôčka padne na červené číslo), zdvojnásobím stávku na tú istú farbu (čiernu).&lt;/li&gt;
    &lt;li&gt;Ak vyhrám, začnem novú hru so stávkou 1 € na opačnú farbu.&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;Keď som si toto prečítal, začal som byť ešte podozrievavejší, pretože:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;“opakovanom stávkovaní malých súm na základe prvej stávky” - toto je tzv. &lt;a href=&quot;http://en.wikipedia.org/wiki/Gambler's_fallacy&quot;&gt;Gamblers Fallacy&lt;/a&gt;, pomýlená predstava, že pravdepodobnosť ďalšieho výsledku závisí od predchádzajúceho výsledku. To jednoducho nie je pravda, to vie každý kto mal štatistiku. Jednotlívé ťahy sú na sebe nezávislé.&lt;/li&gt;
  &lt;li&gt;Kroky 2 a 3 menia farby. To je znova Gambler’s fallacy, pretože, čierna a červená sú štatisticky ekvivalentné.&lt;/li&gt;
  &lt;li&gt;Hlavný princíp je stávkovanie malých súm, ale v kroku 2 zdvojnásobujeme stávku. To je exponenciálny rast. Aký to má dopad si ukážeme ďalej.&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;Niektorí ľudia si myslia, že je rozumnejšie začať s menšou sumou na konte a že to vykompenzujú tým, že budú hrať opatrne, ale pravdou je, že im hrozí oveľa vyššie riziko prehry.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Nie, riziko prehry je v každej individuálnej stávke (ak sa bavíme o čiernej a červenej) rovnaké.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;98 % ľudí hrá bez akejkoľvek logiky alebo metódy. To je ten dav, na ktorom všetky kasína zarábajú svoje zisky. Títo ľudia nechápu hru z hľadiska kalkulácií a logických výsledkov.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;To je dosť možné. Ľudia, ktorí chápu ako ruleta funguje ju nehrajú a tie 2% sú ľudia, ktorí využívajú iné taktiky.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;nesmiete zabúdať na to, že všetci ostatní hráči majú iba 50 % šancu na výhru, ale ak zdvojnásobíte svoje stávky, vaša šanca na výhru sa bude maximálne približovať 100 %. A to je niečo, čo obyčajní hráči nikdy nedokážu pochopiť!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Tu sú hneď 2 závažné chyby:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Nielen ostatní hráči, &lt;em&gt;každý&lt;/em&gt; má 50% šancu na výhru.&lt;/li&gt;
  &lt;li&gt;Nie je to 50%, ale 48,65% pretože v rulete je červená (18), čierna (18) a zelená (1) a teda červená a čierna majú šancu 18/37, ak sa bavíme o Francúszkej verzii. V Americkej je to ešte horšie, lebo tam sú 2 zelené polia.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Graf, ktorý tam k tomu je je síce pekný, ale je to totálny nezmysel.&lt;/p&gt;

&lt;p&gt;Na konci článku ešte nasleduje link na to spomínané on-line kasíno, kde sa dá takto skvele zarobiť a kopec komentárov od “úspešných” hráčov, ktorí takto zarobili už veľa peňazí™.&lt;/p&gt;

&lt;p&gt;Pokračujte &lt;a href=&quot;/python/other/slovak/2014/07/10/roulette-II.html&quot;&gt;Štatistická simulácia metódy a jej vyhodnotenie&lt;/a&gt;&lt;/p&gt;
</description>
                <pubDate>Thu, 10 Jul 2014 00:00:00 +0200</pubDate>
                <link>/python/other/slovak/2014/07/10/roulette-I.html</link>
                <guid isPermaLink="true">/python/other/slovak/2014/07/10/roulette-I.html</guid>
            </item>
        
            <item>
                <title>Python Pip Crashes</title>
                <description>&lt;p&gt;I was upgrading my disk to SSD the other day, and to make sure all my data fit, I’ve done some
cleaning up, among others I’ve run &lt;code class=&quot;highlighter-rouge&quot;&gt;brew cleanup&lt;/code&gt; which deletes old formulae. But apparently
somewhere along the way that has broken my Python install. Trying to run Flask server would produce
a cryptic error:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;ImportError: No module named itsdangerous&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Hmm okay, lets try to install it:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt; % pip3 install itsdangerous
    Downloading/unpacking itsdangerous
    Downloading itsdangerous-0.23.tar.gz (46kB): 46kB downloaded
    [1]    48739 segmentation fault  pip3 install itsdangerous&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Mmmkaay, what? I’ve tried to reinstall python to no avail, the search did not show anything either…
The segfault looked like this:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;Process:         Python [61249]
Path:            /usr/local/Cellar/python3/3.3.4/Frameworks/Python.framework/Versions/3.3/Resources/Python.app/Contents/MacOS/Python
Identifier:      Python
Version:         3.3.4 (3.3.4)
Code Type:       X86-64 (Native)
Parent Process:  sudo [61248]
Responsible:     Terminal [416]
User ID:         0

Date/Time:       2014-02-21 12:35:15.725 +0100
OS Version:      Mac OS X 10.9.1 (13B42)
Report Version:  11

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000011

VM Regions Near 0x11:
--&amp;gt; 
    __TEXT                 00000001084d7000-00000001084d9000 [    8K] r-x/rwx SM=COW  /usr/local/Cellar/python3/3.3.4/Frameworks/Python.framework/Versions/3.3/Resources/Python.app/Contents/MacOS/Python

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libcrypto.1.0.0.dylib           0x0000000108f6d1ac EVP_PKEY_CTX_dup + 28
1   libcrypto.1.0.0.dylib           0x0000000108f61565 EVP_MD_CTX_copy_ex + 325
2   _hashlib.so                     0x0000000108e88933 locked_EVP_MD_CTX_copy + 78
3   _hashlib.so                     0x0000000108e887f0 EVP_hexdigest + 51
4   org.python.python               0x0000000108570bd2 PyEval_EvalFrameEx + 16052
5   org.python.python               0x000000010857512d fast_function + 186
6   org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
7   org.python.python               0x000000010857512d fast_function + 186
8   org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
9   org.python.python               0x000000010857512d fast_function + 186
10  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
11  org.python.python               0x000000010857512d fast_function + 186
12  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
13  org.python.python               0x000000010857512d fast_function + 186
14  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
15  org.python.python               0x000000010857512d fast_function + 186
16  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
17  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
18  org.python.python               0x00000001085751a2 fast_function + 303
19  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
20  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
21  org.python.python               0x00000001085751a2 fast_function + 303
22  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
23  org.python.python               0x000000010857512d fast_function + 186
24  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
25  org.python.python               0x000000010857512d fast_function + 186
26  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
27  org.python.python               0x000000010857512d fast_function + 186
28  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
29  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
30  org.python.python               0x0000000108506099 function_call + 345
31  org.python.python               0x00000001084ea67a PyObject_Call + 111
32  org.python.python               0x0000000108571486 PyEval_EvalFrameEx + 18280
33  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
34  org.python.python               0x00000001085751a2 fast_function + 303
35  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
36  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
37  org.python.python               0x00000001085751a2 fast_function + 303
38  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
39  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
40  org.python.python               0x00000001085751a2 fast_function + 303
41  org.python.python               0x0000000108570c92 PyEval_EvalFrameEx + 16244
42  org.python.python               0x000000010856cb93 PyEval_EvalCodeEx + 1579
43  org.python.python               0x000000010856c562 PyEval_EvalCode + 63
44  org.python.python               0x000000010858d6cf run_mod + 58
45  org.python.python               0x000000010858d8e4 PyRun_FileExFlags + 142
46  org.python.python               0x000000010858d1b9 PyRun_SimpleFileExFlags + 875
47  org.python.python               0x000000010859eaab Py_Main + 3123
48  org.python.python               0x00000001084d8e3f 0x1084d7000 + 7743
49  libdyld.dylib                   0x00007fff91ea55fd start + 1

Thread 1:
0   libsystem_kernel.dylib          0x00007fff98b49e6a __workq_kernreturn + 10
1   libsystem_pthread.dylib         0x00007fff8d74af08 _pthread_wqthread + 330
2   libsystem_pthread.dylib         0x00007fff8d74dfb9 start_wqthread + 13

Thread 2:: Dispatch queue: com.apple.libdispatch-manager
0   libsystem_kernel.dylib          0x00007fff98b4a662 kevent64 + 10
1   libdispatch.dylib               0x00007fff9363143d _dispatch_mgr_invoke + 239
2   libdispatch.dylib               0x00007fff93631152 _dispatch_mgr_thread + 52

Thread 3:
0   libsystem_kernel.dylib          0x00007fff98b49e6a __workq_kernreturn + 10
1   libsystem_pthread.dylib         0x00007fff8d74af08 _pthread_wqthread + 330
2   libsystem_pthread.dylib         0x00007fff8d74dfb9 start_wqthread + 13

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0000000000000001  rbx: 0x00007fff57726b00  rcx: 0x0000000000000010  rdx: 0xffffffffffffffd4
  rdi: 0x00007fe6ca7bde20  rsi: 0x00007fe6ca60d490  rbp: 0x00007fff57726a90  rsp: 0x00007fff57726a70
   r8: 0x0000000000000006   r9: 0x00007fe6ca400000  r10: 0x0000000069793538  r11: 0xffffffffffe9b3a0
  r12: 0x00007fff7c009400  r13: 0x00000001092c0f38  r14: 0x00007fe6ca7bde20  r15: 0x0000000000000000
  rip: 0x0000000108f6d1ac  rfl: 0x0000000000010202  cr2: 0x0000000000000011
 &lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;So libcrypto.dylib is at fault here… Lets see, Homebrew has an option to use Python
with brewed OpenSSL instead:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;  % brew info python3

python3: stable 3.3.4, HEAD
http://www.python.org/
Not installed
From: https://github.com/Homebrew/homebrew/commits/master/Library/Formula/python3.rb
==&amp;gt; Dependencies
Build: pkg-config ✔
Recommended: readline ✔, sqlite ✔, gdbm ✔, xz ✔
==&amp;gt; Options
--quicktest
    Run `make quicktest` after the build
--universal
    Build a universal binary
--with-brewed-openssl
    Use Homebrew's openSSL instead of the one from OS X
--with-brewed-tk
    Use Homebrew's Tk (has optional Cocoa and threads support)
--without-gdbm
    Build without gdbm support
--without-readline
    Build without readline support
--without-sqlite
    Build without sqlite support
--without-xz
    Build without xz support
--HEAD
    install HEAD version
==&amp;gt; Caveats
Setuptools and Pip have been installed. To update them
  pip3 install --upgrade setuptools
  pip3 install --upgrade pip

You can install Python packages with
  `pip3 install &amp;lt;your_favorite_package&amp;gt;`

They will install into the site-package directory
  /usr/local/lib/python3.3/site-packages

See: https://github.com/Homebrew/homebrew/wiki/Homebrew-and-Python&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;So I ran:&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;  % brew uninstall python3
  % brew install python3 --with-brewed-openssl&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;And that seemed to do the trick for the pip segfaults, however it did not solve my original
problem. To do that I’ve uninstalled all of the Flask and related packages using pip3 and then
re-installed them in the virtual environment instead.&lt;/p&gt;
</description>
                <pubDate>Fri, 21 Feb 2014 00:00:00 +0100</pubDate>
                <link>/python/english/2014/02/21/pip-crashes.html</link>
                <guid isPermaLink="true">/python/english/2014/02/21/pip-crashes.html</guid>
            </item>
        
    </channel>
</rss>
